---
title: "端对端加密"
date: 2022-08-04T15:08:25+08:00
draft: false
---

# 端对端加密

## 定义

只有参与通信的双方可以读取通讯信息的通信系统。

## 表现

### 传输层安全 (TLS) vs 端对端通信（E2EE）

传输层安全 (TLS)

发送方加密信息发送给服务器，服务器解密发送给接收方，这就意味着信息都被明文保存在服务器，攻击者只需要拿下服务器，那么就能掌握所有通信内容。

**端对端通信（E2EE）**

发送方发送加密信息后，信息全程从发送到被接收，全程是加密状态,只有接收方通过双方约定的密钥解密了信息后才能知道明文内容

![Untitled](https://s2.loli.net/2022/08/04/GwrsQntEzV5h9jx.png)

## 如何通信

参与通信的各方共同持有一份密钥([预共享密钥](https://zh.m.wikipedia.org/w/index.php?title=%E9%A2%84%E5%85%B1%E4%BA%AB%E5%AF%86%E9%92%A5&action=edit&redlink=1)-[pre-shared key](https://en.wikipedia.org/wiki/pre-shared_key))，通过密钥加密解密信息，这个密钥只有参与通信的各方知道。一个例子，谍战片里面，各方都有自己的密码本(预共享密钥)，这个密码本理论上只有本方人员知道，保证通讯安全。

## 优点

消息从发送者发出，到接收者接收到消息，这个过程是完全加密的，没有密钥的外人只能看到被加密后的信息，并且基本无法通过破解加密信息来得到解密信息，只有持有密钥的一方才能解密得到加密后的数据，换而言之，自己掌握了消息的主动权，而不是寄希望于第三方服务器。避免了第三方可以随时查看自己隐私或者第三方服务器被盗取导致自己隐私被泄漏的隐患。

## 可能存在的问题

### **中间人攻击**

第三方通过各种手段(如密钥被盗…等)冒充接收方与发送方进行通信，发送方每次发送的消息都会经过第三方，第三方可以通过冒充用户与发送者联系，从而导致一系列隐私泄露带来的问题。

### 应对措施

**公钥身份验证**

通过公钥加密信息，让信息在传输的过程中全程加密，当消息到达接收者后，接收者通过只有发送方跟接收方才有的私钥解密通过公钥加密的信息。举个简单的例子，一对广东情侣用粤语交谈，旁边有一个外地单身狗，情侣之间有只有双方才知道暗语，那么外地单身狗首先需要需要了解粤语，再了解暗语才能知道他们的聊天内容，这个例子中，粤语作为公钥传输聊天数据，暗语作为情侣的私钥对聊天信息进行解密，外地单身狗基本不可能偷听并解密他们的聊天内容。

**证书身份验证**

使用[SSL证书](